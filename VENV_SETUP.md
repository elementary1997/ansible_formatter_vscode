# –†–∞–±–æ—Ç–∞ —Å venv –Ω–∞ Linux

## üêç –ü—Ä–æ–±–ª–µ–º–∞: VS Code –Ω–µ –≤–∏–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ venv

VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏ –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É venv.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ):

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å --user (–ü–†–û–©–ï –í–°–ï–ì–û)

```bash
# –í—ã–π–¥–∏—Ç–µ –∏–∑ venv –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
deactivate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
pip3 install --user ansible yamllint ansible-lint pre-commit

# –î–æ–±–∞–≤—å—Ç–µ ~/.local/bin –≤ PATH
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# –ü—Ä–æ–≤–µ—Ä–∫–∞
which yamllint
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: /home/username/.local/bin/yamllint

yamllint --version
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∏–º–ª–∏–Ω–∫–∏ –∏–∑ venv –≤ ~/.local/bin

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ venv:

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
which yamllint
# –ù–∞–ø—Ä–∏–º–µ—Ä: /home/user/project/venv/bin/yamllint

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–∏–º–ª–∏–Ω–∫–æ–≤
mkdir -p ~/.local/bin

# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–º–ª–∏–Ω–∫–∏
ln -sf $(which ansible) ~/.local/bin/ansible
ln -sf $(which yamllint) ~/.local/bin/yamllint
ln -sf $(which ansible-lint) ~/.local/bin/ansible-lint
ln -sf $(which pre-commit) ~/.local/bin/pre-commit

# –î–æ–±–∞–≤—å—Ç–µ –≤ PATH (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# –ü—Ä–æ–≤–µ—Ä–∫–∞ (–º–æ–∂–Ω–æ –≤—ã–π—Ç–∏ –∏–∑ venv)
deactivate
which yamllint
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: /home/username/.local/bin/yamllint

yamllint --version
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–Ø –æ–±–Ω–æ–≤–∏–ª –∫–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è - —Ç–µ–ø–µ—Ä—å –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤:
- `~/.local/bin`
- `./venv/bin` (–≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)
- `../venv/bin` (—É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ)
- `/usr/local/bin`
- `/usr/bin`

–ï—Å–ª–∏ venv –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:
python3 -m venv venv
source venv/bin/activate
pip install ansible yamllint ansible-lint

# –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
npm run compile

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ VS Code (F5)
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ò–∑ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–ë–ï–ó venv):

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º PATH
echo $PATH | grep -o "$HOME/.local/bin"
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: /home/username/.local/bin

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–∞–Ω–¥—ã
which yamllint
which ansible-lint

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏–∏
yamllint --version
ansible-lint --version
ansible --version
```

### –í VS Code:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ VS Code (Ctrl + `)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   ```bash
   echo $PATH
   which yamllint
   ```
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.bashrc`

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd ~/Desktops/Desktop1/ansible_formatter_vscode

# –û—Ç–∫—Ä–æ–π—Ç–µ VS Code
code .

# –ù–∞–∂–º–∏—Ç–µ F5
# –í –Ω–æ–≤–æ–º –æ–∫–Ω–µ –æ—Ç–∫—Ä–æ–π—Ç–µ test_extension/main.yml
# –ü–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã yamllint –∏ ansible-lint
```

## üêõ –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ Exit code 127:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: PATH –≤ VS Code

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code
echo $PATH
# –î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å: /home/username/.local/bin
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code –ü–û–õ–ù–û–°–¢–¨–Æ (–Ω–µ —Ç–æ–ª—å–∫–æ –æ–∫–Ω–æ).

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ü—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

```bash
ls -la ~/.local/bin/yamllint
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rwxr-xr-x (–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π)

# –ï—Å–ª–∏ –Ω–µ—Ç:
chmod +x ~/.local/bin/yamllint
chmod +x ~/.local/bin/ansible-lint
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ó–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é

```bash
~/.local/bin/yamllint --version
# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
pip3 install --user --force-reinstall yamllint ansible-lint
```

## üìã Astra Linux —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞:

–ù–∞ Astra Linux –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ apt (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
sudo apt install python3-pip

# –ò–ª–∏ —á–µ—Ä–µ–∑ pip3 —Å --user
pip3 install --user --upgrade pip
pip3 install --user ansible yamllint ansible-lint

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ pip —É—Å—Ç–∞–Ω–æ–≤–∏–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
pip3 show yamllint | grep Location
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ~/.local/lib/python3.x/site-packages
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –í–∞—Ä–∏–∞–Ω—Ç 1 (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å --user)
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤–µ–∑–¥–µ
   - –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ venv
   - –ü—Ä–æ—â–µ –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏

2. **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω venv:** –í–∞—Ä–∏–∞–Ω—Ç 2 (—Å–∏–º–ª–∏–Ω–∫–∏)
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å venv –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ —Å–∏–º–ª–∏–Ω–∫–∏

3. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
   ```bash
   sudo apt install yamllint ansible-lint  # –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
   ```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –ù–∞–∂–º–∏—Ç–µ F5
4. –ü–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–∑ Exit code 127
