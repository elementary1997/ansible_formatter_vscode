# Ansible Lint Helper - VSCode Extension

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è VSCode –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ansible-lint –∏ pre-commit —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫ inline –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ Quick Fix –º–µ–Ω—é.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ó–∞–ø—É—Å–∫ `ansible-lint` –Ω–∞ —Ç–µ–∫—É—â–µ–º —Ñ–∞–π–ª–µ –∏–ª–∏ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–µ
- ‚úÖ –ó–∞–ø—É—Å–∫ `pre-commit` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ö—É–∫–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ inline –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è)
- ‚úÖ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –æ—à–∏–±–æ–∫ –ø–æ —Ñ–∞–π–ª–∞–º
- ‚úÖ Quick Fix –º–µ–Ω—é (üí°) –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:
  - ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (trailing spaces, –æ—Ç—Å—Ç—É–ø—ã) - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
  - üîß ansible-lint --fix –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ `.ansible-lint`)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤ Status Bar –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ansible –∏ ansible-lint
pip install ansible ansible-lint

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: pre-commit
pip install pre-commit
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Ansible –≤ VSCode**
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π YAML/Ansible —Ñ–∞–π–ª**
3. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "Run Ansible Lint" –≤ Status Bar** (–≤–Ω–∏–∑—É —Å–ª–µ–≤–∞)
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É: `Ctrl+Shift+P` ‚Üí `Ansible Lint: Run on Current File`

## üéÆ –ö–æ–º–∞–Ω–¥—ã

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Command Palette (`Ctrl+Shift+P`):

- `Ansible Lint: Run on Current File` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —Ç–µ–∫—É—â–µ–º —Ñ–∞–π–ª–µ
- `Ansible Lint: Run on All Files` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- `Ansible Lint: Run pre-commit` - –ó–∞–ø—É—Å—Ç–∏—Ç—å pre-commit
- `Ansible Lint: Fix Current File` - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Quick Fix

–ö–æ–≥–¥–∞ ansible-lint –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∏:

1. **–û—à–∏–±–∫–∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—é—Ç—Å—è** –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. **–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä** –Ω–∞ –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç
3. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª–∞–º–ø–æ—á–∫—É** üí° –∏–ª–∏ `Ctrl+.`
4. **–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
   - ‚ö° **Quick Fix** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫)
   - üîß **Fix with ansible-lint** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ansible-lint --fix
   - üö´ **Ignore this rule** - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –≤ skip_list
   - üìñ **Show documentation** - –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –ø—Ä–∞–≤–∏–ª—É

## üìä –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å

–í –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ "Ansible Lint" –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:

- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- üìÅ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ —Ñ–∞–π–ª–∞–º
- üñ±Ô∏è –ö–ª–∏–∫ –ø–æ –æ—à–∏–±–∫–µ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç—Ä–æ–∫–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- üîß –ö–Ω–æ–ø–∫–∞ "Fix File" ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- üîÑ –ö–Ω–æ–ø–∫–∞ "Refresh" ‚Üí –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- üóëÔ∏è –ö–Ω–æ–ø–∫–∞ "Clear" ‚Üí –æ—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–î–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Settings ‚Üí Extensions ‚Üí Ansible Lint Helper):

```json
{
  // –ü—É—Ç—å –∫ ansible-lint (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
  "ansible-lint.executablePath": "",
  
  // –ü—É—Ç—å –∫ pre-commit (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
  "ansible-lint.preCommitPath": "",
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
  "ansible-lint.autoFixOnSave": false
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ VSCode**
2. **–ù–∞–∂–º–∏—Ç–µ F5** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Extension Development Host
3. **–û—Ç–∫—Ä–æ–π—Ç–µ test_playbook.yml**
4. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "Run Ansible Lint"** –≤ Status Bar
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è inline (–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è)
   - ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - ‚úÖ Quick Fix –º–µ–Ω—é —Ä–∞–±–æ—Ç–∞–µ—Ç (üí°)
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìã –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –≤ test_playbook.yml

–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- ‚ùå Trailing spaces (—Å—Ç—Ä–æ–∫–∞ 2, 8)
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è tasks
- ‚ùå –õ–∏—à–Ω–∏–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
- ‚ùå –ó–∞–¥–∞—á–∞ –±–µ–∑ name (—Å—Ç—Ä–æ–∫–∞ 5)

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
npm run compile

# –†–µ–∂–∏–º watch (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è)
npm run watch

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏
F5 –≤ VSCode
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
extension-vscode/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ extension.ts              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ executor.ts               # –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ parser.ts                 # –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–≤–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ diagnosticsProvider.ts    # Inline –æ—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ codeActionsProvider.ts    # Quick Fix –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ quickFixer.ts             # –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ansibleLintFixer.ts       # ansible-lint --fix
‚îÇ   ‚îú‚îÄ‚îÄ webviewPanel.ts           # –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ lintError.ts          # –ú–æ–¥–µ–ª—å –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ out/                          # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ package.json                  # –ú–∞–Ω–∏—Ñ–µ—Å—Ç
‚îî‚îÄ‚îÄ tsconfig.json                 # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üé® –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É
         ‚Üì
    Executor –∑–∞–ø—É—Å–∫–∞–µ—Ç ansible-lint
         ‚Üì
    Parser –ø–∞—Ä—Å–∏—Ç –≤—ã–≤–æ–¥
         ‚Üì
    DiagnosticsProvider —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è
         ‚Üì
    WebviewPanel –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫
         ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Quick Fix (üí°)
         ‚Üì
  CodeActionsProvider –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è:
    - QuickFixer (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
    - AnsibleLintFixer (ansible-lint --fix)
```

## üìù –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–≤–∏–ª –∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –ü—Ä–∞–≤–∏–ª–æ | –ú–µ—Ö–∞–Ω–∏–∑–º | –°–∫–æ—Ä–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|----------|-----------|
| `trailing-spaces` | Quick Fixer | ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫ |
| `indentation` | Quick Fixer | ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | –ë–∞–∑–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã YAML |
| `too-many-blank-lines` | Quick Fixer | ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ |
| `name[missing]` | ansible-lint --fix | üîß 1-2 —Å–µ–∫ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ name –∫ –∑–∞–¥–∞—á–∞–º |
| `yaml[truthy]` | ansible-lint --fix | üîß 1-2 —Å–µ–∫ | yes/no ‚Üí true/false |
| `jinja[spacing]` | ansible-lint --fix | üîß 1-2 —Å–µ–∫ | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ jinja2 |

## ü§ù –í–∫–ª–∞–¥

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥:
1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
